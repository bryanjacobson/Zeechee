<div class="grid_16" style="background-color:white;">
  <%= render 'nav_bar' %>
</div>
<div class="clear"></div>

<div class="grid_4">
  <b>Hierarchy:</b><br />
  <%= link_to '=TOP=', topics_path %>
  <br />
  <% if @topic %>
    <% @topic.ancestors.each do |topic| %>
      <%= image_tag(default_icon(topic.icon), :height => '40') %>
      <%= link_to topic.title, navigate_path(topic) %>
      <br />
    <% end %>
  <% end %>

  <hr />
  <b>Subtopics:</b><br />
  <% if @topic %>
    <% topic_list = @topic.siblings.all(:order => :title) %>
  <% else %>
    <% topic_list = @topics %>
  <% end %>
  <% topic_list.each do |topic| %>
    <% if @topic && @topic.id == topic.id %>
      <div style="background-color:Bisque;">
        <%= image_tag(default_icon(topic.icon), :height => '40') %>
        <b><%= topic.title %></b>
        <% if topic.has_children? %>
          <%= link_to 'subtopics', navigate_path(topic.children.first) %>
        <% end %>
      </div>
    <% else %>
      <%= image_tag(default_icon(topic.icon), :height => '40') %>
      <%= link_to topic.title, navigate_path(topic) %>
    <% end %>
    <br />
  <% end %>

</div>

<div class="grid_12">
  
  <%= render 'topic_list' %>
  
  <% if @topic %>
    <div class="link_button" style="width:120px;">
      <%= link_to 'Add Subtopic', new_topic_path(:parent_id => @topic.id) %>
    </div>
  <% else %>
    <div class="link_button" style="width:186px;">
      <%= link_to 'Add Top Level Topic', new_topic_path %>
    </div>
  <% end %>

</div>

