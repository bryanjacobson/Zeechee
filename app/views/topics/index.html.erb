<div class="grid_16" style="background-color:white;">
  <br />
  <span class="smedium_text">
    <b>Explore Topics</b>
  </span>
  <br />
  <%= render 'nav_bar' %>

  <% if notice %>
    <p id="notice"><%= notice %></p>
  <% end %>

  <% if @topic %>
    <span style="padding:5px;" title="<%= @topic.icon_credit %>">
      <%= image_tag(default_icon(@topic.icon), :height => '75') %>
    </span>
    <span class="big_text">
      <%= @topic.title %>
    </span>
    <span class="smedium_text" title="<%= @topic.description %>">
      <%= link_to 'Edit', edit_topic_path(@topic) %>
      <%= link_to 'Contents', contents_path(:topic_id => @topic.id) %>[<%= @topic.contents.count %>]
    </span>
    <br />Description:<%= @topic.description %>
  
  <% else %>
    <span class="big_text">
      =TOP=
    </span>
  <% end %>
  
  <hr />

  <h4>Subtopics:</h4>
  
  <table>
  
  <% @topics.each do |topic| %>
    <tr>
      <td>
        <span style="padding:5px;" title="<%= topic.description %>">
          <%= image_tag(default_icon(topic.icon), :height => '50') %>
        </span>
      </td>
      <td>
        <span class="medium_text" title="<%= topic.description %>">
          <%= link_to topic.title, navigate_path(topic) %>
        </span>
        <span class="smedium_text" title="<%= topic.description %>">
          <%= link_to 'Edit', edit_topic_path(topic) %>
        </span>
      </td>
    </tr>
  <% end %>
  </table>
  
  <% if @topic %>
    <div class="link_button" style="width:120px;">
      <%= link_to 'Add Subtopic', new_topic_path(:parent_id => @topic.id) %>
    </div>
  <% else %>
    <div class="link_button" style="width:186px;">
      <%= link_to 'Add Top Level Topic', new_topic_path %>
    </div>
  <% end %>

  <% if @screen %>
    <br />
    <hr />
    <h4>Screens:</h4>

    <% @topic.screens.each do |screen| %>
      <%= link_to screen.title, screen %><br />
    <% end %>

    <%= form_for(@screen) do |f| %>
      <% if @screen.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@screen.errors.count, "error") %> prohibited this screen from being saved:</h2>
    
          <ul>
          <% @screen.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
          </ul>
        </div>
      <% end %>

      <%= f.hidden_field :user_id %>
      <%= f.hidden_field :topic_id %>
      <%= f.hidden_field :position %>
    
      <div class="actions">
        <%= f.submit %>
        <%= f.text_field :title, :size => 50 %>
      </div>
    <% end %>
  <% end %>

</div>
